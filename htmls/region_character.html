<!DOCTYPE html>
<html>

<head>
    <title>Assignment2</title>
    <script src="./js/d3_another.js"></script>
    <script src="./js/d3.js"></script>
</head>

<body>


    <svg width=" 2200" height="1200" id="mainsvg" class="svgs">

        <defs>
            <pattern id="pubs" width="100%" height="100%" patternContentUnits="objectBoundingBox">
                <image width="1" height="1" xlink:href="img/pubs.png" />
            </pattern>
        </defs>

        <defs>
            <pattern id="schools" width="100%" height="100%" patternContentUnits="objectBoundingBox">
                <image width="1" height="1" xlink:href="img/schools.png" />
            </pattern>
        </defs>

        <defs>
            <pattern id="restaurants" width="100%" height="100%" patternContentUnits="objectBoundingBox">
                <image width="1" height="1" xlink:href="img/restaurants.png" />
            </pattern>
        </defs>

        <!-- <rect x="60" y="90" width="1490" height="1430" fill="url(#avatar)" opacity=0.2></rect> -->
    </svg>

    <div style="position:relative;left:1700px;top:0px;width:00px;height:0px" class="box">
        <div class="picture"></div>
    </div>
    <script src='./js/Radar.js' type='module'></script>


    <div style="position:relative;left:500px;top:0px;width:00px;height:0px" class="box">
        <div class="picture"></div>
    </div>
    <script src='./js/Radar_2.js' type='module'></script>


    <div style="position:relative;left:900px;top:0px;width:00px;height:0px" class="box">
        <div class="picture"></div>
    </div>
    <script src='./js/Radar_3.js' type='module'></script>


    <div style="position:relative;left:1300px;top:0px;width:00px;height:0px" class="box">
        <div class="picture"></div>
    </div>
    <script src='./js/Radar_4.js' type='module'></script>


    <div style="position:relative;left:100px;top:0px;width:00px;height:0px" class="box">
        <div class="picture"></div>
    </div>
    <script src='./js/Radar_1.js' type='module'></script>



    <div style="position:relative;left:100px;top:0px;width:00px;height:0px" class="box">
        <p style="font-size:2em; "> 地区特征雷达图 </p>
    </div>

    <div style="position:relative;left:335px;top:70px;width:100px;height:0px">
        <p style="font-size:1em; "> 餐饮 </p>
    </div>

    <div style="position:relative;left:735px;top:55px;width:100px;height:0px">
        <p style="font-size:1em; "> 餐饮 </p>
    </div>

    <div style="position:relative;left:1135px;top:40px;width:100px;height:0px">
        <p style="font-size:1em; "> 餐饮 </p>
    </div>

    <div style="position:relative;left:1535px;top:25px;width:100px;height:0px">
        <p style="font-size:1em; "> 餐饮 </p>
    </div>

    <div style="position:relative;left:1935px;top:10px;width:100px;height:0px">
        <p style="font-size:1em; "> 餐饮 </p>
    </div>




    <div style="position:relative;left:225px;top:60px;width:600px;height:0px">
        <p style="font-size:1em; "> 教育
            &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
            娱乐</p>
    </div>

    <div style="position:relative;left:625px;top:45px;width:600px;height:0px">
        <p style="font-size:1em; "> 教育
            &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
            娱乐 </p>
    </div>

    <div style="position:relative;left:1025px;top:30px;width:600px;height:0px">
        <p style="font-size:1em; "> 教育
            &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
            娱乐 </p>
    </div>

    <div style="position:relative;left:1425px;top:15px;width:600px;height:0px">
        <p style="font-size:1em; "> 教育
            &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
            娱乐 </p>
    </div>

    <div style="position:relative;left:1825px;top:0px;width:600px;height:0px">
        <p style="font-size:1em; "> 教育
            &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
            娱乐 </p>
    </div>






    <div style="position:relative;left:225px;top:80px;width:600px;height:0px">
        <p style="font-size:1em; "> 面积
            &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
            就业</p>
    </div>

    <div style="position:relative;left:625px;top:65px;width:600px;height:0px">
        <p style="font-size:1em; "> 面积
            &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
            就业 </p>
    </div>

    <div style="position:relative;left:1025px;top:50px;width:600px;height:0px">
        <p style="font-size:1em; "> 面积
            &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
            就业 </p>
    </div>

    <div style="position:relative;left:1425px;top:35px;width:600px;height:0px">
        <p style="font-size:1em; "> 面积
            &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
            就业 </p>
    </div>

    <div style="position:relative;left:1825px;top:20px;width:600px;height:0px">
        <p style="font-size:1em; "> 面积
            &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
            就业 </p>
    </div>






    <div style="position:relative;left:335px;top:70px;width:100px;height:0px">
        <p style="font-size:1em; "> 居住 </p>
    </div>

    <div style="position:relative;left:735px;top:55px;width:100px;height:0px">
        <p style="font-size:1em; "> 居住 </p>
    </div>

    <div style="position:relative;left:1135px;top:40px;width:100px;height:0px">
        <p style="font-size:1em; "> 居住 </p>
    </div>

    <div style="position:relative;left:1535px;top:25px;width:100px;height:0px">
        <p style="font-size:1em; "> 居住 </p>
    </div>

    <div style="position:relative;left:1935px;top:10px;width:100px;height:0px">
        <p style="font-size:1em; "> 居住 </p>
    </div>





    <script>



        const svg = d3.select('svg');
        const width = svg.attr('width');
        const height = svg.attr('height');
        const margin = { top: 100, right: 100, bottom: 100, left: 100 };
        const innerWidth = width - margin.left - margin.right;
        const innerHeight = height - margin.top - margin.bottom;
        const mainGroup = svg.append('g')
            .attr('transform', `translate(${margin.left}, ${margin.top})`)
        const crossLineX = svg.append('line').attr('class', 'crossLine'), crossLineY = svg.append('line').attr('class', 'crossLine');
        d3.selectAll('.crossLine').attr('stroke', 'black');
        const xValue = d => d.xValue;
        const yValue = d => d.yValue;
        const xScale = d3.scaleLinear();
        const yScale = d3.scaleLinear();
        const colorScale = d3.scaleOrdinal();
        let buildings;
        let pgyData;


        d3.csv('./data/Attributes/Buildings.csv').then(data => {
            buildings = data;
            cnt = buildings.length;

            buildings.forEach(d => {
                d.xValue = d.location.split(" ")[1].split("(")[2] / 1;
                d.yValue = d.location.split(" ")[2].split(",")[0] / 1;
                d.building = d.location.split(" ");
            });
            // console.log(buildings[3].xValue);

            xScale.domain([d3.min(buildings, xValue) - 100, d3.max(buildings, xValue) + 100]).range([0, innerWidth - 1000]);
            yScale.domain([d3.min(buildings, yValue) - 200, d3.max(buildings, yValue) + 200]).range([innerHeight, 0]);
            const xAxis = d3.axisBottom(xScale).ticks(10).tickFormat(d => d);
            const yAxis = d3.axisLeft(yScale);
            const xAxisGroup = mainGroup.append('g').attr('id', 'xAxisGroup').call(xAxis)
                .attr('transform', `translate(0, ${innerHeight})`);
            const yAxisGroup = mainGroup.append('g').attr('id', 'yAxisGroup').call(yAxis);
            xAxisGroup.attr('transform', `translate(${0}, ${innerHeight})`);
            d3.selectAll('.tick text').attr('font-size', '1.2em')
            xAxisGroup.append('text').attr('class', 'axisTitle').text('X')
                .attr('x', innerWidth / 2).attr('y', 60);
            yAxisGroup.append('text').attr('class', 'axisTitle').text('Y')
                .attr('transform', 'rotate(-90)').attr('x', -innerHeight / 2).attr('y', -60);
            d3.selectAll('.axisTitle').attr('text-anchor', "middle").attr('fill', 'black').attr('font-size', '2em');



            for (let i = 0; i < cnt; i++) {
                buildings.split = buildings[i].location.split(" ");
                angles = buildings.split.length;
                var arr_x = [buildings.split[1].split("(")[2] / 1];
                for (let j = 1; j < angles / 2 - 1; j++) {
                    if (!isNaN(buildings.split[2 * j + 1] / 1))
                        arr_x.push(buildings.split[2 * j + 1] / 1);
                    else
                        arr_x.push(buildings.split[2 * j + 1].split("(")[1] / 1);

                }
                buildings.positionX = arr_x;
                var arr_y = [buildings.split[2].split(",")[0] / 1];
                for (let j = 1; j < angles / 2 - 2; j++) {
                    if (!isNaN(buildings.split[2 * j + 2].split(",")[0] / 1))
                        arr_y.push(buildings.split[2 * j + 2].split(",")[0] / 1);
                    else
                        arr_y.push(buildings.split[2 * j + 2].split(")")[0] / 1);

                }
                arr_y.push(buildings.split[angles - 1].split(")")[0] / 1);
                buildings.positionY = arr_y;
                arr = [];
                for (let j = 0; j < angles / 2 - 1; j++) {
                    var point = [xScale(arr_x[j]), yScale(arr_y[j])];
                    arr.push(point);
                }
                arr_real = [];
                for (let j = 0; j < angles / 2 - 1; j++) {
                    var point = [(arr_x[j]), (arr_y[j])];
                    arr_real.push(point);
                }
                if (i == 40)
                    console.log(arr);
                var region_color;
                if (arr_real[0][1] > 127 / 76 * arr_real[0][0] + 9671)
                    region_color = '#1f77b4';
                else {
                    if (arr_real[0][1] < 3 / 17 * arr_real[0][0] + 2500)
                        region_color = '#d62728';
                    else {
                        if (arr_real[0][0] > 500)
                            region_color = '#2ca02c';
                        else
                            region_color = '#ff7f0e';
                    }
                }
                // console.log(arr);
                var line = d3.line();
                var buildingline = line(arr);
                mainGroup.append('path').datum(data).attr('class', name).attr('fill', 'none')
                    .attr('d', buildingline).attr('stroke', region_color).attr('stroke-width', '1px').attr('opacity', 1);
            }



            d3.csv('./data/Attributes/Apartments.csv').then(data => {
                apartments = data;
                apartments.forEach(d => {
                    d.xValue = d.location.split(" ")[1].split("(")[1] / 1;
                    d.yValue = d.location.split(" ")[2].split(")")[0] / 1;
                });

                d3.csv('./data/Attributes/Employers.csv').then(data => {
                    employers = data;
                    employers.forEach(d => {
                        d.xValue = d.location.split(" ")[1].split("(")[1] / 1;
                        d.yValue = d.location.split(" ")[2].split(")")[0] / 1;
                    });

                    d3.csv('./data/Attributes/Pubs.csv').then(data => {
                        pubs = data;
                        pubs.forEach(d => {
                            d.xValue = d.location.split(" ")[1].split("(")[1] / 1;
                            d.yValue = d.location.split(" ")[2].split(")")[0] / 1;
                        });

                        d3.csv('./data/Attributes/Schools.csv').then(data => {
                            schools = data;
                            schools.forEach(d => {
                                d.xValue = d.location.split(" ")[1].split("(")[1] / 1;
                                d.yValue = d.location.split(" ")[2].split(")")[0] / 1;
                            });

                            d3.csv('./data/Attributes/Restaurants.csv').then(data => {
                                restaurants = data;
                                restaurants.forEach(d => {
                                    d.xValue = d.location.split(" ")[1].split("(")[1] / 1;
                                    d.yValue = d.location.split(" ")[2].split(")")[0] / 1;
                                });



                                // mainGroup.selectAll('ApartmentsdataCircles').data(apartments).join('circle')
                                //     .attr('cx', d => xScale(xValue(d))).attr('cy', d => yScale(yValue(d))).attr('r', 1.5)
                                //     .attr('stroke-width', 2).attr('fill', '#115faf').attr('opacity', 0.8);
                                // mainGroup.selectAll('EmployersdataCircles').data(employers).join('circle')
                                //     .attr('cx', d => xScale(xValue(d))).attr('cy', d => yScale(yValue(d))).attr('r', 2.5)
                                //     .attr('stroke-width', 2).attr('fill', '#ff7e00').attr('opacity', 0.8);


                                // mainGroup.selectAll('PubsdataCircles').data(pubs).join('circle')
                                //     .attr('cx', d => xScale(xValue(d))).attr('cy', d => yScale(yValue(d))).attr('r', 4)
                                //     .attr('stroke-width', 2).attr('fill', '#af00b6').attr('opacity', 0.8);
                                mainGroup.selectAll('PubsdataCircles').data(pubs).join('rect')
                                    .attr("width", 70)
                                    .attr("height", 50)
                                    .attr('x', d => xScale(xValue(d))).attr('y', d => yScale(yValue(d))).attr('r', 4)
                                    .attr('stroke-width', 2).attr('fill', 'url(#pubs)').attr('opacity', 1);
                                mainGroup.selectAll('SchoolsdataCircles').data(schools).join('rect')
                                    .attr("width", 50)
                                    .attr("height", 50)
                                    .attr('x', d => xScale(xValue(d))).attr('y', d => yScale(yValue(d))).attr('r', 4)
                                    .attr('stroke-width', 2).attr('fill', 'url(#schools)').attr('opacity', 1);
                                mainGroup.selectAll('RestaurantsdataCircles').data(restaurants).join('rect')
                                    .attr("width", 40)
                                    .attr("height", 40)
                                    .attr('x', d => xScale(xValue(d))).attr('y', d => yScale(yValue(d))).attr('r', 4)
                                    .attr('stroke-width', 2).attr('fill', 'url(#restaurants)').attr('opacity', 1);


                                mainGroup.selectAll('RestaurantsdataCircles').data(restaurants).join('rect')
                                    .attr("width", 40)
                                    .attr("height", 40)
                                    .attr('x', 900).attr('y', 900).attr('r', 4)
                                    .attr('stroke-width', 2).attr('fill', 'url(#restaurants)').attr('opacity', 1);
                                mainGroup.selectAll('PubsdataCircles').data(pubs).join('rect')
                                    .attr("width", 80)
                                    .attr("height", 70)
                                    .attr('x', 880).attr('y', d => 830).attr('r', 4)
                                    .attr('stroke-width', 2).attr('fill', 'url(#pubs)').attr('opacity', 1);
                                mainGroup.selectAll('SchoolsdataCircles').data(schools).join('rect')
                                    .attr("width", 50)
                                    .attr("height", 50)
                                    .attr('x', 890).attr('y', 950).attr('r', 4)
                                    .attr('stroke-width', 2).attr('fill', 'url(#schools)').attr('opacity', 1);


                                mainGroup.append('text').attr('class', name).attr('fill', 'black').attr("font-size", 20).text('pubs').attr('x', 940).attr('y', 880);
                                mainGroup.append('text').attr('class', name).attr('fill', 'black').attr("font-size", 20).text('restaurants').attr('x', 940).attr('y', 930);
                                mainGroup.append('text').attr('class', name).attr('fill', 'black').attr("font-size", 20).text('schools').attr('x', 940).attr('y', 980);

                                mainGroup.append('text').attr('class', name).attr('fill', '#1f77b4').attr("font-size", 30).text('Alldrik').attr('x', 240).attr('y', 80);
                                mainGroup.append('text').attr('class', name).attr('fill', '#ff7f0e').attr("font-size", 30).text('Stagar').attr('x', 510).attr('y', 600);
                                mainGroup.append('text').attr('class', name).attr('fill', '#2ca02c').attr("font-size", 30).text('Nely').attr('x', 900).attr('y', 560);
                                mainGroup.append('text').attr('class', name).attr('fill', '#d62728').attr("font-size", 30).text('Filnner').attr('x', 490).attr('y', 880);







                            })
                        })
                    })
                })
            })
        })







        d3.csv('./data/People_density/People.csv').then(data => {
            var all = [0, 0, 0, 0];
            var day = [0, 0, 0, 0];
            var night = [0, 0, 0, 0];

            // data.forEach(d => {
            //     d.xValue = d.a;
            //     d.yValue = d.b;
            //     d.daytime = d.c;
            //     d.month = d.d;
            // });

            console.log(data[0].a);



            var width = 1600;      //设置svg区域的宽度
            var height = 1400;     //设置svg区域的高度



            var all_dataset_3 = [['Alldrik', data[0].a], ['Stagar', data[0].b], ['Nely', data[0].c], ['Filnner', data[0].d]];
            var day_dataset_3 = [['Alldrik', data[1].a], ['Stagar', data[1].b], ['Nely', data[1].c], ['Filnner', data[1].d]];
            var night_dataset_3 = [['Alldrik', data[2].a], ['Stagar', data[2].b], ['Nely', data[2].c], ['Filnner', data[2].d]];

            var all_dataset_4 = [['Alldrik', data[3].a], ['Stagar', data[3].b], ['Nely', data[3].c], ['Filnner', data[3].d]];
            var day_dataset_4 = [['Alldrik', data[4].a], ['Stagar', data[4].b], ['Nely', data[4].c], ['Filnner', data[4].d]];
            var night_dataset_4 = [['Alldrik', data[5].a], ['Stagar', data[5].b], ['Nely', data[5].c], ['Filnner', data[5].d]];

            var all_dataset_5 = [['Alldrik', data[6].a], ['Stagar', data[6].b], ['Nely', data[6].c], ['Filnner', data[6].d]];
            var day_dataset_5 = [['Alldrik', data[7].a], ['Stagar', data[7].b], ['Nely', data[7].c], ['Filnner', data[7].d]];
            var night_dataset_5 = [['Alldrik', data[8].a], ['Stagar', data[8].b], ['Nely', data[8].c], ['Filnner', data[8].d]];

            var all_dataset_6 = [['Alldrik', data[9].a], ['Stagar', data[9].b], ['Nely', data[9].c], ['Filnner', data[9].d]];
            var day_dataset_6 = [['Alldrik', data[10].a], ['Stagar', data[10].b], ['Nely', data[10].c], ['Filnner', data[10].d]];
            var night_dataset_6 = [['Alldrik', data[11].a], ['Stagar', data[11].b], ['Nely', data[11].c], ['Filnner', data[11].d]];


            const renderPie = function (dataset, postion_x, postion_y, class_name) {
                //转换数据
                var pie = d3.pie()
                    .value(function (d) { return d[1]; });
                var piedata = pie(dataset);
                // console.log(piedata);

                //外半径和内半径
                var outerRadius = width / 20;
                var innerRadius = 0;

                //创建弧生成器
                var arc = d3.arc()
                    .innerRadius(innerRadius)
                    .outerRadius(outerRadius);
                var color = d3.scaleOrdinal(d3.schemePastel1);

                //添加对应数目的弧组，即<g>元素
                var arcs = mainGroup.selectAll(class_name)
                    .data(piedata)
                    .enter()
                    .append('g')
                    .attr('transform', 'translate(' + postion_x + ',' + postion_y + ')');

                //添加弧的路径元素
                arcs.append('path')
                    .attr('fill', function (d, i) {
                        return color(i);         //设定弧的颜色
                    })
                    .attr('d', function (d) {
                        return arc(d);           //使用弧生成器
                    });


                //添加弧内的文字元素
                arcs.append('text')
                    .attr('transform', function (d) {
                        var x = arc.centroid(d)[0] * 1.4;      //文字的x坐标
                        var y = arc.centroid(d)[1] * 1.4;      //文字的y坐标
                        return 'translate(' + x + ',' + y + ')';
                    })
                    .attr('text-anchor', 'middle')
                    .text(function (d) {
                        //计算市场份额和百分比
                        var percent = Number(d.value) / d3.sum(dataset, function (d) { return d[1]; }) * 100;
                        //保留一个小数点，末尾加一个百分号返回
                        return percent.toFixed(1) + '%';
                    });

                //添加连接弧外的直线元素
                arcs.append('line')
                    .attr('stroke', 'black')
                    .attr('x1', function (d) { return arc.centroid(d)[0] * 2; })
                    .attr('y1', function (d) { return arc.centroid(d)[1] * 2; })
                    .attr('x2', function (d) { return arc.centroid(d)[0] * 2.2; })
                    .attr('y2', function (d) { return arc.centroid(d)[1] * 2.2; });

                //添加弧外的文字元素
                arcs.append('text')
                    .attr('transform', function (d) {
                        var x = arc.centroid(d)[0] * 2.5;
                        var y = arc.centroid(d)[1] * 2.5;
                        return 'translate(' + x + ',' + y + ')';
                    })
                    .attr('text-anchor', 'middle')
                    .text(function (d) {
                        return d.data[0];
                    });

            }

            renderPie(all_dataset_3, 1400, 200, 'a');
            renderPie(day_dataset_3, 1650, 200, 'b');
            renderPie(night_dataset_3, 1900, 200, 'c');

            renderPie(all_dataset_4, 1400, 450, 'a');
            renderPie(day_dataset_4, 1650, 450, 'b');
            renderPie(night_dataset_4, 1900, 450, 'c');

            renderPie(all_dataset_5, 1400, 700, 'a');
            renderPie(day_dataset_5, 1650, 700, 'b');
            renderPie(night_dataset_5, 1900, 700, 'c');

            renderPie(all_dataset_6, 1400, 950, 'a');
            renderPie(day_dataset_6, 1650, 950, 'b');
            renderPie(night_dataset_6, 1900, 950, 'c');


        }
        );

        var line = d3.line();
        seg1 = [[-200, 1100], [2200, 1100]]
        var line1 = line(seg1);
        mainGroup.append('path').attr('class', name).attr('fill', 'none')
            .attr('d', line1).attr('stroke', '#147465').attr('stroke-width', '3px').attr('opacity', 1);

        seg2 = [[1080, 0], [1080, 1100]]
        var line2 = line(seg2);
        mainGroup.append('path').attr('class', name).attr('fill', 'none')
            .attr('d', line2).attr('stroke', '#147465').attr('stroke-width', '1.5px').attr('opacity', 1);

        mainGroup.append('text').attr('class', name).attr('fill', 'black').attr("font-size", 30).text('三月').attr('x', 1170).attr('y', 200);
        mainGroup.append('text').attr('class', name).attr('fill', 'black').attr("font-size", 30).text('四月').attr('x', 1170).attr('y', 450);
        mainGroup.append('text').attr('class', name).attr('fill', 'black').attr("font-size", 30).text('五月').attr('x', 1170).attr('y', 700);
        mainGroup.append('text').attr('class', name).attr('fill', 'black').attr("font-size", 30).text('六月').attr('x', 1170).attr('y', 950);
        mainGroup.append('text').attr('class', name).attr('fill', 'black').attr("font-size", 30).text('地区人口分布图').attr('x', 1100).attr('y', 50);
        mainGroup.append('text').attr('class', name).attr('fill', 'black').attr("font-size", 30).text('全天').attr('x', 1370).attr('y', 50);
        mainGroup.append('text').attr('class', name).attr('fill', 'black').attr("font-size", 30).text('白天').attr('x', 1620).attr('y', 50);
        mainGroup.append('text').attr('class', name).attr('fill', 'black').attr("font-size", 30).text('晚上').attr('x', 1870).attr('y', 50);

        mainGroup.append('text').attr('class', name).attr('fill', 'black').attr("font-size", 30).text('地图').attr('x', 900).attr('y', 50);



    </script>
</body>

</html>